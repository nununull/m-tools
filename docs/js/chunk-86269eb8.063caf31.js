(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86269eb8"],{"4d43":function(e,t,n){"use strict";n("e231")},e231:function(e,t,n){},e41c:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),r={class:"main"},o=Object(a["q"])("查询"),i=Object(a["q"])("查看 "),c=Object(a["q"])("播放 "),l=["textContent"],u={style:{"margin-top":"30px"}},d={key:0},s=Object(a["q"])("复制下载地址"),b={key:1,style:{"margin-top":"10px"}},v=Object(a["q"])("复制m3u8地址"),O=Object(a["q"])("导出为PotPlayer格式");function p(e,t,n,p,m,j){var f=Object(a["R"])("el-input"),h=Object(a["R"])("el-form-item"),g=Object(a["R"])("el-button"),y=Object(a["R"])("el-form"),_=Object(a["R"])("el-row"),V=Object(a["R"])("el-table-column"),w=Object(a["R"])("el-table"),k=Object(a["R"])("el-pagination"),C=Object(a["R"])("el-image"),P=Object(a["R"])("el-col"),R=Object(a["R"])("el-card"),x=Object(a["R"])("el-dialog");return Object(a["I"])(),Object(a["n"])("div",r,[Object(a["r"])(_,null,{default:Object(a["gb"])((function(){return[Object(a["r"])(y,{inline:"",onSubmit:t[3]||(t[3]=Object(a["jb"])((function(){}),["prevent"]))},{default:Object(a["gb"])((function(){return[Object(a["r"])(h,{label:"剧名",modelValue:m.searchParams,"onUpdate:modelValue":t[1]||(t[1]=function(e){return m.searchParams=e})},{default:Object(a["gb"])((function(){return[Object(a["r"])(f,{modelValue:m.searchParams.keywords,"onUpdate:modelValue":t[0]||(t[0]=function(e){return m.searchParams.keywords=e})},null,8,["modelValue"])]})),_:1},8,["modelValue"]),Object(a["r"])(g,{type:"primary",onClick:t[2]||(t[2]=function(e){return j.onSearch(1)})},{default:Object(a["gb"])((function(){return[o]})),_:1})]})),_:1})]})),_:1}),Object(a["o"])("div",null,[Object(a["r"])(w,{data:m.okResc.tableData.list,height:"70vh"},{default:Object(a["gb"])((function(){return[Object(a["r"])(V,{type:"index",width:"50"}),Object(a["r"])(V,{prop:"type_name",label:"类型",width:"180"}),Object(a["r"])(V,{prop:"vod_name",label:"剧名",width:"280"}),Object(a["r"])(V,{prop:"vod_remarks",label:"备注",width:"180"}),Object(a["r"])(V,{prop:"vod_time",label:"更新日期",width:"180"}),Object(a["r"])(V,{label:"操作",width:"180"},{default:Object(a["gb"])((function(e){return[Object(a["r"])(g,{size:"mini",type:"primary",onClick:function(t){return j.onDetail(e.$index,e.row)}},{default:Object(a["gb"])((function(){return[i]})),_:2},1032,["onClick"]),Object(a["r"])(g,{size:"mini",type:"danger",onClick:function(t){return j.onPlay(e.$index,e.row)}},{default:Object(a["gb"])((function(){return[c]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(a["r"])(k,{style:{padding:"10px"},"hide-on-single-page":"",background:"",layout:"total,prev, pager, next","page-size":m.okResc.tableData.limit,total:m.okResc.tableData.total,onCurrentChange:j.onPageChange},null,8,["page-size","total","onCurrentChange"])]),Object(a["r"])(x,{modelValue:m.isShowDeatailDialog,"onUpdate:modelValue":t[4]||(t[4]=function(e){return m.isShowDeatailDialog=e})},{default:Object(a["gb"])((function(){return[Object(a["r"])(R,null,{default:Object(a["gb"])((function(){return[Object(a["r"])(_,{gutter:10},{default:Object(a["gb"])((function(){return[Object(a["r"])(P,{span:12},{default:Object(a["gb"])((function(){return[Object(a["r"])(C,{src:m.movieVO.vodPic},null,8,["src"])]})),_:1}),Object(a["r"])(P,{span:12},{default:Object(a["gb"])((function(){return[Object(a["o"])("div",null,[Object(a["o"])("b",{textContent:Object(a["V"])(m.movieVO.vodName)},null,8,l),Object(a["o"])("div",null,[Object(a["o"])("div",null,"别名："+Object(a["V"])(m.movieVO.vodSub),1),Object(a["o"])("div",null,"导演："+Object(a["V"])(m.movieVO.vodDirector),1),Object(a["o"])("div",null,"类型："+Object(a["V"])(m.movieVO.typeName),1),Object(a["o"])("div",null,"年份："+Object(a["V"])(m.movieVO.vodYear),1),Object(a["o"])("div",null,"地区："+Object(a["V"])(m.movieVO.vodArea),1),Object(a["o"])("div",null,"语言："+Object(a["V"])(m.movieVO.vodLang),1),Object(a["o"])("div",null,"演员："+Object(a["V"])(m.movieVO.vodActor),1)]),Object(a["o"])("div",u,[m.movieVO.downloadUrlList?(Object(a["I"])(),Object(a["n"])("div",d,[Object(a["r"])(g,{type:"primary",onClick:j.onCopyDownloadUrl},{default:Object(a["gb"])((function(){return[s]})),_:1},8,["onClick"])])):Object(a["m"])("",!0),m.movieVO.playVOList?(Object(a["I"])(),Object(a["n"])("div",b,[Object(a["r"])(g,{type:"primary",onClick:j.onCopyM3u8},{default:Object(a["gb"])((function(){return[v]})),_:1},8,["onClick"]),Object(a["r"])(g,{type:"danger",onClick:j.onExportPotPlayerM3u8},{default:Object(a["gb"])((function(){return[O]})),_:1},8,["onClick"])])):Object(a["m"])("",!0)])])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}var m=n("b85c"),j=n("1da1"),f=(n("ac1f"),n("1276"),n("96cf"),n("21a6")),h=(n("99af"),{array2M3u8String:function(e,t){for(var n="",a=1;a<=t.length;a++){var r=t[a-1];n=a===t.length?n.concat(e,r.title,",",r.url):n.concat(e,r.title,",",r.url,"\n")}return n},array2PotPlayerM3u8String:function(e,t){for(var n="#EXTM3U\n",a=1;a<=t.length;a++){var r=t[a-1];n=n.concat("#EXTINF:-1 ,",e+"-"+r.title,"\n",r.url,"\n")}return n}}),g=h,y={name:"MovieSearch",data:function(){return{searchParams:{keywords:""},isShowDeatailDialog:!1,movieVO:"",okResc:{tableData:"",searchPageParams:{ac:"list",wd:this.keywords,t:null,pg:1}}}},methods:{onSearch:function(e){this.onSearchOk(e)},onSearchOk:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.okResc.searchPageParams.wd=t.searchParams.keywords,t.okResc.searchPageParams.pg=e,n.next=4,t.$httpUtil.http(t.$httpApi.SERVICE.OK.page,t.okResc.searchPageParams);case 4:a=n.sent,a&&(t.okResc.tableData=a);case 6:case"end":return n.stop()}}),n)})))()},onPageChange:function(e){this.onSearch(e)},onDetail:function(e,t){var n=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$httpUtil.http(n.$httpApi.SERVICE.OK.detail,{ac:"detail",ids:t.vod_id});case 2:if(a=e.sent,1!==a.code&&n.$message.warning("请求失败！"),r=a.list[0],a.list&&!(0>=a.list.length)&&r.vod_play_url){e.next=8;break}return n.$message.warning("当前视频播放地址已被删除，无法播放！"),e.abrupt("return");case 8:o=n.dealMovieVO(r),n.movieVO=o,n.isShowDeatailDialog=!0;case 11:case"end":return e.stop()}}),e)})))()},onPlay:function(e,t){var n=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$httpUtil.http(n.$httpApi.SERVICE.OK.detail,{ac:"detail",ids:t.vod_id});case 2:if(a=e.sent,1!==a.code&&n.$message.warning("请求失败！"),r=a.list[0],a.list&&!(0>=a.list.length)&&r.vod_play_url){e.next=8;break}return n.$message.warning("当前视频播放地址已被删除，无法播放！"),e.abrupt("return");case 8:return o=n.dealMovieVO(r),n.movieVO=o,localStorage.setItem("movieVO",JSON.stringify(o)),n.$store.commit("updatePlayVO",o.playVOList[0]),e.next=14,n.$router.push("pot-player-movie-play");case 14:case"end":return e.stop()}}),e)})))()},dealMovieVO:function(e){for(var t=e.vod_play_from.split(e.vod_play_note),n=0,a=0;a<t.length;a++)(-1<t[a].indexOf("m3u8")||-1<t[a].indexOf("M3U8"))&&(n=a);var r,o=e.vod_play_url.split(e.vod_play_note)[n],i=[],c=Object(m["a"])(o.split("#"));try{for(c.s();!(r=c.n()).done;){var l=r.value,u=l.split("$"),d={};d.title=u[0],d.url=u[1],i.push(d)}}catch(g){c.e(g)}finally{c.f()}var s=[],b=e.vod_down_url;if(b){var v,O=Object(m["a"])(b.split("#"));try{for(O.s();!(v=O.n()).done;){var p=v.value,j=p.split("$"),f={};f.title=j[0],f.url=j[1],s.push(f)}}catch(g){O.e(g)}finally{O.f()}}var h={};return h.vodId=e.vod_id,h.vodName=e.vod_name,h.vodSub=e.vod_sub,h.vodDirector=e.vod_director,h.vodClass=e.vod_class,h.vodPic=e.vod_pic,h.vodActor=e.vod_actor,h.vodBlurb=e.vod_blurb,h.vodRemarks=e.vod_remarks,h.vodArea=e.vod_area,h.vodLang=e.vod_lang,h.vodYear=e.vod_year,h.vodTime=e.vod_time,h.vodContent=e.vod_content,h.vodPlayFrom=e.vod_play_from,h.vodPlayServer=e.vod_play_server,h.typeName=e.type_name,h.isCollected=!1,h.downloadUrlList=s,h.playVOList=i,h},onCopyDownloadUrl:function(){var e=g.array2M3u8String(this.movieVO.vodName,this.movieVO.downloadUrlList);this.onCopy(e),this.$message.success("下载地址复制成功！")},onCopyM3u8:function(){var e=g.array2M3u8String(this.movieVO.vodName,this.movieVO.playVOList);this.onCopy(e),this.$message.success("下载地址复制成功！")},onExportPotPlayerM3u8:function(){var e=g.array2PotPlayerM3u8String(this.movieVO.vodName,this.movieVO.playVOList);this.onCopy(e);var t=Date.now(),n=new Blob([e],{type:"text/plain;charset=utf-8"});Object(f["saveAs"])(n,this.movieVO.vodName+t+".m3u")},onCopy:function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t)},keyupEnter:function(){var e=this;document.onkeydown=function(){var t=window.event.keyCode;13===t&&e.onSearch(1)}}},created:function(){this.keyupEnter()}},_=(n("4d43"),n("6b0d")),V=n.n(_);const w=V()(y,[["render",p],["__scopeId","data-v-47b18df9"]]);t["default"]=w}}]);