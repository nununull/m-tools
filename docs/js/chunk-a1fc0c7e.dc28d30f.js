(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1fc0c7e"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"4fd5":function(e,t,n){"use strict";n("95ee")},"841c":function(e,t,n){"use strict";var r=n("c65b"),a=n("d784"),o=n("825a"),i=n("1d80"),c=n("129f"),l=n("577e"),u=n("dc4a"),s=n("14c3");a("search",(function(e,t,n){return[function(t){var n=i(this),a=void 0==t?void 0:u(t,e);return a?r(a,t,n):new RegExp(t)[e](l(n))},function(e){var r=o(this),a=l(e),i=n(t,r,a);if(i.done)return i.value;var u=r.lastIndex;c(u,0)||(r.lastIndex=0);var d=s(r,a);return c(r.lastIndex,u)||(r.lastIndex=u),null===d?-1:d.index}]}))},"95ee":function(e,t,n){},e41c:function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),a={class:"main"},o=Object(r["q"])("查询"),i=Object(r["q"])("查看 "),c=Object(r["q"])("播放 "),l=["textContent"],u={style:{"margin-top":"30px"}},s={key:0},d=Object(r["q"])("复制下载地址"),b={key:1,style:{"margin-top":"10px"}},v=Object(r["q"])("复制m3u8地址"),p=Object(r["q"])("导出为PotPlayer格式");function m(e,t,n,m,O,f){var h=Object(r["R"])("el-option"),j=Object(r["R"])("el-select"),g=Object(r["R"])("el-form-item"),y=Object(r["R"])("el-input"),w=Object(r["R"])("el-button"),_=Object(r["R"])("el-form"),k=Object(r["R"])("el-row"),V=Object(r["R"])("el-table-column"),R=Object(r["R"])("el-table"),x=Object(r["R"])("el-pagination"),C=Object(r["R"])("el-image"),P=Object(r["R"])("el-col"),S=Object(r["R"])("el-card"),D=Object(r["R"])("el-dialog");return Object(r["I"])(),Object(r["n"])("div",a,[Object(r["r"])(k,null,{default:Object(r["gb"])((function(){return[Object(r["r"])(_,{inline:"",onSubmit:t[4]||(t[4]=Object(r["jb"])((function(){}),["prevent"]))},{default:Object(r["gb"])((function(){return[Object(r["r"])(g,{label:"资源站"},{default:Object(r["gb"])((function(){return[Object(r["r"])(j,{modelValue:O.rescTypeList,"onUpdate:modelValue":t[0]||(t[0]=function(e){return O.rescTypeList=e}),multiple:"","collapse-tags":"",style:{"margin-left":"20px"},placeholder:"请选择"},{default:Object(r["gb"])((function(){return[(Object(r["I"])(!0),Object(r["n"])(r["b"],null,Object(r["P"])(f.rescTypes,(function(e){return Object(r["I"])(),Object(r["l"])(h,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(r["r"])(g,{label:"剧名",modelValue:O.searchParams,"onUpdate:modelValue":t[2]||(t[2]=function(e){return O.searchParams=e})},{default:Object(r["gb"])((function(){return[Object(r["r"])(y,{modelValue:O.searchParams.keywords,"onUpdate:modelValue":t[1]||(t[1]=function(e){return O.searchParams.keywords=e})},null,8,["modelValue"])]})),_:1},8,["modelValue"]),Object(r["r"])(w,{type:"primary",onClick:t[3]||(t[3]=function(e){return f.onSearch(1)})},{default:Object(r["gb"])((function(){return[o]})),_:1})]})),_:1})]})),_:1}),Object(r["o"])("div",null,[Object(r["r"])(R,{data:O.okResc.tableData.list,height:"70vh"},{default:Object(r["gb"])((function(){return[Object(r["r"])(V,{type:"index",width:"50"}),Object(r["r"])(V,{prop:"type_name",label:"类型",width:"180"}),Object(r["r"])(V,{prop:"vod_name",label:"剧名",width:"280"}),Object(r["r"])(V,{prop:"vod_remarks",label:"备注",width:"180"}),Object(r["r"])(V,{prop:"vod_time",label:"更新日期",width:"180"}),Object(r["r"])(V,{label:"操作",width:"180"},{default:Object(r["gb"])((function(e){return[Object(r["r"])(w,{size:"mini",type:"primary",onClick:function(t){return f.onDetail(e.$index,e.row)}},{default:Object(r["gb"])((function(){return[i]})),_:2},1032,["onClick"]),Object(r["r"])(w,{size:"mini",type:"danger",onClick:function(t){return f.onPlay(e.$index,e.row)}},{default:Object(r["gb"])((function(){return[c]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),Object(r["r"])(x,{style:{padding:"10px"},"hide-on-single-page":"",background:"",layout:"total,prev, pager, next","page-size":O.okResc.tableData.limit,total:O.okResc.tableData.total,onCurrentChange:f.onPageChange},null,8,["page-size","total","onCurrentChange"])]),Object(r["r"])(D,{modelValue:O.isShowDeatailDialog,"onUpdate:modelValue":t[5]||(t[5]=function(e){return O.isShowDeatailDialog=e})},{default:Object(r["gb"])((function(){return[Object(r["r"])(S,null,{default:Object(r["gb"])((function(){return[Object(r["r"])(k,{gutter:10},{default:Object(r["gb"])((function(){return[Object(r["r"])(P,{span:12},{default:Object(r["gb"])((function(){return[Object(r["r"])(C,{src:O.movieVO.vodPic},null,8,["src"])]})),_:1}),Object(r["r"])(P,{span:12},{default:Object(r["gb"])((function(){return[Object(r["o"])("div",null,[Object(r["o"])("b",{textContent:Object(r["V"])(O.movieVO.vodName)},null,8,l),Object(r["o"])("div",null,[Object(r["o"])("div",null,"别名："+Object(r["V"])(O.movieVO.vodSub),1),Object(r["o"])("div",null,"导演："+Object(r["V"])(O.movieVO.vodDirector),1),Object(r["o"])("div",null,"类型："+Object(r["V"])(O.movieVO.typeName),1),Object(r["o"])("div",null,"年份："+Object(r["V"])(O.movieVO.vodYear),1),Object(r["o"])("div",null,"地区："+Object(r["V"])(O.movieVO.vodArea),1),Object(r["o"])("div",null,"语言："+Object(r["V"])(O.movieVO.vodLang),1),Object(r["o"])("div",null,"演员："+Object(r["V"])(O.movieVO.vodActor),1)]),Object(r["o"])("div",u,[O.movieVO.downloadUrlList?(Object(r["I"])(),Object(r["n"])("div",s,[Object(r["r"])(w,{type:"primary",onClick:f.onCopyDownloadUrl},{default:Object(r["gb"])((function(){return[d]})),_:1},8,["onClick"])])):Object(r["m"])("",!0),O.movieVO.playVOList?(Object(r["I"])(),Object(r["n"])("div",b,[Object(r["r"])(w,{type:"primary",onClick:f.onCopyM3u8},{default:Object(r["gb"])((function(){return[v]})),_:1},8,["onClick"]),Object(r["r"])(w,{type:"danger",onClick:f.onExportPotPlayerM3u8},{default:Object(r["gb"])((function(){return[p]})),_:1},8,["onClick"])])):Object(r["m"])("",!0)])])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])])}var O=n("b85c"),f=n("1da1"),h=(n("96cf"),n("ac1f"),n("841c"),n("1276"),n("21a6")),j=(n("99af"),{array2M3u8String:function(e,t){for(var n="",r=1;r<=t.length;r++){var a=t[r-1];n=r===t.length?n.concat(e,a.title,",",a.url):n.concat(e,a.title,",",a.url,"\n")}return n},array2PotPlayerM3u8String:function(e,t){for(var n="#EXTM3U\n",r=1;r<=t.length;r++){var a=t[r-1];n=n.concat("#EXTINF:-1 ,",e+"-"+a.title,"\n",a.url,"\n")}return n}}),g=j,y=n("0f1c"),w=n("d2f3"),_={search:function(e,t){var n=arguments,r=this;return Object(f["a"])(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=n.length>2&&void 0!==n[2]?n[2]:1,i={},a.next=4,r.baiduPage(e,t,o);case 4:i.baidu=a.sent;case 5:case"end":return a.stop()}}),a)})))()},detail:function(e,t){var n=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(y["a"].BASE.BAIDU.type!==e){r.next=2;break}return r.abrupt("return",n.baiduDetail(t));case 2:case"end":return r.stop()}}),r)})))()},baiduPage:function(e,t,n){return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,o,i,c,l,u,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={},t&&(a.t=t),n&&(a.pg=n),e&&(a.wd=e),r.next=6,w["a"].http(y["a"].SERVICE.BAIDU.page,a,!1,!0,y["a"].BASE.BAIDU.title+"加载中");case 6:if(o=r.sent,!(1===o.code&&0<o.list.length)){r.next=13;break}i=[],c=Object(O["a"])(o.list);try{for(c.s();!(l=c.n()).done;)u=l.value,s={},s.typeName=u.type_name,s.vodName=u.vod_name,s.vodTime=u.vod_time,s.vodRemarks=u.vod_remarks,s.rescType=y["a"].BASE.BAIDU.type,i.push(s)}catch(d){c.e(d)}finally{c.f()}return o.list=i,r.abrupt("return",o);case 13:return r.abrupt("return",null);case 14:case"end":return r.stop()}}),r)})))()},baiduDetail:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w["a"].http(y["a"].SERVICE.BAIDU.detail,{ids:e},!1,!0);case 2:if(n=t.sent,console.log(n),!(1===n.code&&0<n.list.length)){t.next=10;break}r=[],a=Object(O["a"])(n.list);try{for(a.s();!(o=a.n()).done;)i=o.value,c={},c.typeName=i.type_name,c.vodName=i.vod_name,c.vodTime=i.vod_time,c.vodRemarks=i.vod_remarks,c.rescType=y["a"].BASE.BAIDU.type,r.push(c)}catch(l){a.e(l)}finally{a.f()}return n.list=r,t.abrupt("return",n);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t)})))()}},k=_,V={name:"MovieSearch",data:function(){return{rescTypeList:[this.$httpApi.BASE.BAIDU.type],searchParams:{keywords:""},result:"",isShowDeatailDialog:!1,movieVO:"",okResc:{tableData:"",searchPageParams:{ac:"list",wd:this.keywords,t:null,pg:1}}}},computed:{rescTypes:function(){var e=[];return e.push({name:this.$httpApi.BASE.BAIDU.name,value:this.$httpApi.BASE.BAIDU.type}),e}},methods:{onSearch:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(0>=t.rescTypeList)){n.next=3;break}return t.$message.warning("请选择资源站！"),n.abrupt("return");case 3:return n.next=5,k.search(t.searchParams.keywords,"",e);case 5:t.result=n.sent;case 6:case"end":return n.stop()}}),n)})))()},onSearchOk:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.okResc.searchPageParams.wd=t.searchParams.keywords,t.okResc.searchPageParams.pg=e,n.next=4,t.$httpUtil.http(t.$httpApi.SERVICE.OK.page,t.okResc.searchPageParams);case 4:r=n.sent,r&&(t.okResc.tableData=r);case 6:case"end":return n.stop()}}),n)})))()},onPageChange:function(e){this.onSearch(e)},onDetail:function(e,t){var n=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$httpUtil.http(n.$httpApi.SERVICE.OK.detail,{ac:"detail",ids:t.vod_id});case 2:if(r=e.sent,1!==r.code&&n.$message.warning("请求失败！"),a=r.list[0],r.list&&!(0>=r.list.length)&&a.vod_play_url){e.next=8;break}return n.$message.warning("当前视频播放地址已被删除，无法播放！"),e.abrupt("return");case 8:o=n.dealMovieVO(a),n.movieVO=o,n.isShowDeatailDialog=!0;case 11:case"end":return e.stop()}}),e)})))()},onPlay:function(e,t){var n=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$httpUtil.http(n.$httpApi.SERVICE.OK.detail,{ac:"detail",ids:t.vod_id});case 2:if(r=e.sent,1!==r.code&&n.$message.warning("请求失败！"),a=r.list[0],r.list&&!(0>=r.list.length)&&a.vod_play_url){e.next=8;break}return n.$message.warning("当前视频播放地址已被删除，无法播放！"),e.abrupt("return");case 8:return o=n.dealMovieVO(a),n.movieVO=o,localStorage.setItem("movieVO",JSON.stringify(o)),n.$store.commit("updatePlayVO",o.playVOList[0]),e.next=14,n.$router.push("pot-player-movie-play");case 14:case"end":return e.stop()}}),e)})))()},dealMovieVO:function(e){for(var t=e.vod_play_from.split(e.vod_play_note),n=0,r=0;r<t.length;r++)(-1<t[r].indexOf("m3u8")||-1<t[r].indexOf("M3U8"))&&(n=r);var a,o=e.vod_play_url.split(e.vod_play_note)[n],i=[],c=Object(O["a"])(o.split("#"));try{for(c.s();!(a=c.n()).done;){var l=a.value,u=l.split("$"),s={};s.title=u[0],s.url=u[1],i.push(s)}}catch(g){c.e(g)}finally{c.f()}var d=[],b=e.vod_down_url;if(b){var v,p=Object(O["a"])(b.split("#"));try{for(p.s();!(v=p.n()).done;){var m=v.value,f=m.split("$"),h={};h.title=f[0],h.url=f[1],d.push(h)}}catch(g){p.e(g)}finally{p.f()}}var j={};return j.vodId=e.vod_id,j.vodName=e.vod_name,j.vodSub=e.vod_sub,j.vodDirector=e.vod_director,j.vodClass=e.vod_class,j.vodPic=e.vod_pic,j.vodActor=e.vod_actor,j.vodBlurb=e.vod_blurb,j.vodRemarks=e.vod_remarks,j.vodArea=e.vod_area,j.vodLang=e.vod_lang,j.vodYear=e.vod_year,j.vodTime=e.vod_time,j.vodContent=e.vod_content,j.vodPlayFrom=e.vod_play_from,j.vodPlayServer=e.vod_play_server,j.typeName=e.type_name,j.isCollected=!1,j.downloadUrlList=d,j.playVOList=i,j},onCopyDownloadUrl:function(){var e=g.array2M3u8String(this.movieVO.vodName,this.movieVO.downloadUrlList);this.onCopy(e),this.$message.success("下载地址复制成功！")},onCopyM3u8:function(){var e=g.array2M3u8String(this.movieVO.vodName,this.movieVO.playVOList);this.onCopy(e),this.$message.success("下载地址复制成功！")},onExportPotPlayerM3u8:function(){var e=g.array2PotPlayerM3u8String(this.movieVO.vodName,this.movieVO.playVOList);this.onCopy(e);var t=Date.now(),n=new Blob([e],{type:"text/plain;charset=utf-8"});Object(h["saveAs"])(n,this.movieVO.vodName+t+".m3u")},onCopy:function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t)},keyupEnter:function(){var e=this;document.onkeydown=function(){var t=window.event.keyCode;13===t&&e.onSearch(1)}}},created:function(){this.keyupEnter()}},R=(n("4fd5"),n("6b0d")),x=n.n(R);const C=x()(V,[["render",m],["__scopeId","data-v-28edd33c"]]);t["default"]=C}}]);